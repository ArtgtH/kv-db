services:
  kv1:
    build: .
    container_name: kv1
    command: ["-config", "/config/cluster.json", "-node-id", "n1", "-http", ":8080", "-data-dir", "/data"]
    volumes:
      - ./config:/config:ro
      - kv1-data:/data
    ports:
      - "8081:8080"

  kv2:
    build: .
    container_name: kv2
    command: ["-config", "/config/cluster.json", "-node-id", "n2", "-http", ":8080", "-data-dir", "/data"]
    volumes:
      - ./config:/config:ro
      - kv2-data:/data
    ports:
      - "8082:8080"

  kv3:
    build: .
    container_name: kv3
    command: ["-config", "/config/cluster.json", "-node-id", "n3", "-http", ":8080", "-data-dir", "/data"]
    volumes:
      - ./config:/config:ro
      - kv3-data:/data
    ports:
      - "8083:8080"

volumes:
  kv1-data:
  kv2-data:
  kv3-data:
